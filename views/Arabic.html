<!DOCTYPE html>
<html>
  <head>
    <title>Arabic Root System Dictionary</title>
    <link rel='shortcut icon' type='image/x-icon' href="/favicon.ico" />
    <!-- yamli api-->
    <script type="text/javascript" src="/api"></script>
    <!--jquery-->
    <script type="text/javascript" src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
    <!--angular-->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <!--bootstrap-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="inputDiv">
      Submit transliteration!
        <form action="submitArabic" method="POST" enctype="application/json">
            <br><input type="textarea" id="text">
            <input type="submit" value="Submit" onclick="submitform(); return false">
        </form>
        Or upload a photo!
        <form action="submit" method="POST" enctype="multipart/form-data">
          <br><input type="file" name="Img" /><br>
          <input type="submit" value="Submit">
         </form>
    </div>
  </body>
  <script>
    //settings
    /*yamli settings*/
    if (typeof(Yamli) == 'object' && Yamli.init({ startMode:'on' })){
      Yamli.yamlify('text', {settingsPlacement:'hide', uiLanguage:'en'});
    }

    //methods 
    function submitform(){
      var formData = document.getElementById("text").value 
      console.log(formData)
      var jsonform = {data: formData}
      var jsonObj = JSON.stringify(jsonform)
      console.log(jsonObj)
      $.ajax({
        type: "POST",
        url: "submitArabic",
        data: jsonObj,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        success: function(res){
          $("body").html(res);
          //TODO: Error handle the stuff that I fixed in the back end
          var results = JSON.parse(res)
          var wordArr = JSON.parse(results.rootMeaning).words.split("\n")
        }
      })
    }

  </script>
</html>